<!doctype html>
<html lang="en-us">
  <head>
    <title>Collectd-Graphite plugin.  Bringing together two great tools // Joe Miller</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.55.6" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="Joe Miller" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="http://joemiller.me/css/main.min.0458ca72864ad239460367ee126ede06ce52dae0bdeea871db68f2a7d4c03dcf.css" />

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-XXXXXXXX-X', 'auto');
	
	ga('send', 'pageview');
}
</script>

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Collectd-Graphite plugin.  Bringing together two great tools"/>
<meta name="twitter:description" content="Collectd is a powerful tool for gathering metrics using its wide range of plugins, such as cpu, disk, load, memory, etc.  But there is a lack of good frontend tools for visualizing the data collectd produces.

Graphite is an amazingly powerful tool from Orbitz for visualizing metrics, but there is a lack of tools for gathering host-level stats and sending into graphite.

It would be great if we could leverage the strengths of both tools."/>

    <meta property="og:title" content="Collectd-Graphite plugin.  Bringing together two great tools" />
<meta property="og:description" content="Collectd is a powerful tool for gathering metrics using its wide range of plugins, such as cpu, disk, load, memory, etc.  But there is a lack of good frontend tools for visualizing the data collectd produces.

Graphite is an amazingly powerful tool from Orbitz for visualizing metrics, but there is a lack of tools for gathering host-level stats and sending into graphite.

It would be great if we could leverage the strengths of both tools." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://joemiller.me/2011/04/14/collectd-graphite-plugin/" />
<meta property="article:published_time" content="2011-04-14T11:27:19-07:00"/>
<meta property="article:modified_time" content="2011-04-14T11:27:19-07:00"/>


  </head>
  <body>
    <header class="app-header">
      <a href="http://joemiller.me"><img class="app-header-avatar" src="/avatar.jpg" alt="Joe Miller" /></a>
      <h1>Joe Miller</h1>
      <p>Infrastructure Ops/Engineering. Continuously DevOping at Webscale</p>
      <div class="app-header-social">
        
          <a target="_blank" href="https://github.com/joemiller"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg></a>
        
          <a target="_blank" href="https://twitter.com/miller_joe"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg></a>
        
          <a target="_blank" href="https://keybase.io/joemiller"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-key">
  <title>key</title>
  <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"></path>
</svg></a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">Collectd-Graphite plugin.  Bringing together two great tools</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Apr 14, 2011
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          2 min read
        </div></div>
    </header>
    <nav id="toc">
      
    </nav>
    <div class="post-content">
      <p><a href="http://collectd.org/" title="collectd.org">Collectd</a> is a powerful tool for gathering metrics using its wide range of plugins, such as cpu, disk, load, memory, etc.  But there is a lack of good frontend tools for visualizing the data collectd produces.</p>

<p><a href="http://graphite.wikidot.com/" title="graphite">Graphite</a> is an amazingly powerful tool from Orbitz for visualizing metrics, but there is a lack of tools for gathering host-level stats and sending into graphite.</p>

<p>It would be great if we could leverage the strengths of both tools.</p>

<p>So, I wrote a plugin for collectd that will send data into a graphite instance - <strong><a href="https://github.com/joemiller/collectd-graphite" title="collectd-graphite">collectd-graphite</a></strong> . This plugin runs inside the collectd process using the collectd-perl interface. This makes it different than Jordan Sissel&rsquo;s <a href="https://github.com/loggly/collectd-to-graphite">collectd-to-graphite</a> tool which runs in a separate process using node.js. The plugin-based approach reduces the number of moving parts we need to worry about (ie: less stuff to monitor, fail, restart, etc.) Jordan&rsquo;s tool is good, btw, but I wanted something different.</p>

<p>Grab the plugin on github:   <a href="https://github.com/joemiller/collectd-graphite" title="collectd-graphite">https://github.com/joemiller/collectd-graphite</a></p>

<p>In my setup, I have collectd running on all hosts with the cpu, disk, memory, and network-client plugins loaded.  The network-client is configured to send data to a central collectd server which also runs my graphite processes.  The collectd-graphite plugin is loaded on this machine only and relays all data received by collectd to graphite.</p>

<p>Alternatively, you could load the collectd-graphite plugin on every machine in your environment and send data directly to graphite.  This may not scale well, however, and you would not get any of the security that can be applied with collectd&rsquo;s network protocol.</p>

<p><strong>Update Sept 24, 2012</strong> : Collectd 5.1+ has an integrated C-based graphite plugin now. I would recommend using that as it will be supported and maintained as part of Collectd core going forward. Info here: <a href="http://collectd.org/wiki/index.php/Plugin:Write_Graphite" title="http://collectd.org/wiki/index.php/Plugin:Write\_Graphite">http://collectd.org/wiki/index.php/Plugin:Write_Graphite</a></p>
    </div>
    <div class="post-footer">
      
      This post was published <strong>3020</strong> days ago, content in the post may be inaccurate, even wrong now.
    </div>
  </article>

    </main>
  </body>
</html>
